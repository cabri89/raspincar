{% extends '@App/base.html.twig' %}

{% block body %}
<h1>{{car}}</h1>
<a class="modal-trigger waves-effect waves-light btn" href="#updateCar">Modifier la voiture</a>
<!-- Modal Structure -->
<div id="updateCar" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4>Modifier la voiture</h4>
        {{ form_start(carForm) }}
        {{ form_widget(carForm) }}
        {{ form_end(carForm) }}
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Fermer</a>
    </div>
</div>

<h3>Carnet d'entretien</h3>
<a class="modal-trigger waves-effect waves-light btn" href="#addMaintenance">Ajouter un entretien</a>

<table>
    <thead>
        <tr>
            <th>Description</th>
            <th>Date</th>
            <th>Kilomètres du véhicule</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% set _token = csrf_token('DELETE_MAINTENANCE_TOKEN') %}
        {% for maintenance in car.maintenances %}
        <tr>
            <td>{{maintenance.type}}</td>
            <td>{{maintenance.dateMaintenance|date("m/d/Y")}}</td>
            <td>{{maintenance.kilometres}}</td>
            <td>
                <a href="{{ path('app_account_maintenancedelete',{id : maintenance.id, idCar : car.id, _token : _token}) }}" class="">
                    <span>Supprimer</span>
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Modal Structure -->
<div id="addMaintenance" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4>Ajout d'un entretien</h4>
        {{ form_start(maintenanceForm) }}
        {{ form_widget(maintenanceForm) }}
        {{ form_widget(maintenanceForm.save) }}
        {{ form_end(maintenanceForm) }}
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Fermer</a>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
    $('.modal').modal();
});
</script>
{% endblock %}
